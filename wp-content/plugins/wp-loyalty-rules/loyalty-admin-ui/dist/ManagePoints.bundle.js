"use strict";(self.webpackChunkreact_wordpress=self.webpackChunkreact_wordpress||[]).push([[279],{1489:(e,t,a)=>{a.d(t,{G:()=>n,l:()=>l});var l=function(e,t,a,l,n,r){alertify.confirm(r,a,(function(){t(e)}),(function(){return!0})).set("labels",{ok:l,cancel:n})},n=function(e,t,a,l,n){alertify.confirm(n,t,(function(){e("delete")}),(function(){return!0})).set("labels",{ok:a,cancel:l})}},1554:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(7294),n=a(3972);const r=function(e){var t=e.setActive,a=e.activeState,n=e.setActiveState,r=e.right,s=e.activeLabels;return l.createElement("div",{className:"flex   flex-col border rounded-lg bg-white w-55 text-light border-light_border z-10 absolute ".concat(r," top-13 overflow-hidden")},s.map((function(e,r){return l.createElement("p",{key:r,onClick:function(){!function(e){t(!1),n({value:e.value,label:e.label})}(e)},className:"flex items-center  px-4 py-2 justify-between ".concat(e.value===a.value?"bg-primary_extra_light text-primary":"bg-white text-dark "," hover:bg-primary_extra_light cursor-pointer hover:bg-opacity-50")},e.label,e.value===a.value&&l.createElement("span",{className:"flex items-center"},l.createElement("i",{className:" wlr wlrf-tick color-important font-medium  text-lg 2xl:text-xl leading-0 cursor-pointer "})))})))},s=function(e){var t=e.icon,a=e.active,s=e.setActive,c=e.activeState,i=e.setActiveState,o=e.activeLabels,m=e.width,u=void 0===m?"w-36":m,d=e.title,p=e.closeOtherDropDown,f=l.useContext(n.Gr);return l.createElement("div",{className:"relative flex items-center border justify-between  ".concat(u," rounded-lg border-light_border p-1.5 cursor-pointer "),onClick:function(){p(),s(!a)}},l.createElement("div",{className:"flex items-center justify-start space-x-2 text-10px xl:text-xs 2xl:text-sm_14_l_20 "},l.createElement("p",{className:"font-medium text-light"},d||f.common.filter),l.createElement("p",{className:"text-dark font-semibold"},c.label)),l.createElement("div",null,t),a&&l.createElement(r,{active:a,setActive:s,activeState:c,setActiveState:i,right:"right-0",activeLabels:o,width:"w-40"}))}},2304:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(7294),n=[{value:5},{value:10},{value:20},{value:50},{value:100}];const r=function(e){e.editlimit;var t=e.setEditLimit,a=e.limitFilter,r=e.setLimitFilter,s=e.right,c=void 0===s?0:s;return[5,10,20,50,100].includes(a.value),l.createElement("div",{className:"absolute flex  flex-col border rounded-lg bg-white w-23  text-light border-light_border z-10  ".concat(c,"  bottom-14 overflow-hidden")},n.map((function(e,n){return l.createElement("p",{key:n,onClick:function(){return function(e){t(!1),r({value:e.value})}(e)},className:"flex items-center  px-4 py-2 justify-between ".concat(e.value==a.value?"bg-primary_extra_light text-primary":"bg-white text-dark "," hover:bg-primary_extra_light cursor-pointer hover:bg-opacity-50")},e.value,e.value==a.value&&l.createElement("span",{className:"flex items-center"},l.createElement("i",{className:" wlr wlrf-tick color-important font-medium  text-lg 2xl:text-xl leading-0 cursor-pointer "})))})))},s=function(e){var t=e.editLimit,a=e.setEditLimit,n=e.limitFilter,s=e.setLimitFilter,c=e.closeOtherDropDown;return l.createElement("div",{className:"relative flex items-center border justify-between h-12 w-23 px-4 py-2 space-x-3 rounded-lg border-light_border   cursor-pointer ",onClick:function(){c(),a(!t)}},l.createElement("div",{className:"text-dark font-medium text-sm_14_l_20"},n.value),l.createElement("div",null,l.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-updown color-important "})),t&&l.createElement(r,{editLimit:t,setEditLimit:a,limitFilter:n,setLimitFilter:s,right:"right-0"}))}},9361:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var l=a(4942),n=a(2982),r=a(885),s=a(7294),c=a(6732),i=a(874),o=a(8085),m=a(616),u=a(3972),d=a(3089),p=a(8991);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const _=function(e){var t=e.localState,a=e.loadUserLists,l=e.close,n=e.open,o=e.setOpen,m=s.useState({user_email:"",points:0,comments:""}),f=(0,r.Z)(m,2),_=f[0],g=f[1],v=s.useContext(u.Gr),b=s.useState({}),y=(0,r.Z)(b,2),w=y[0],E=y[1],h=s.useState([]),N=(0,r.Z)(h,2),S=N[0],j=N[1],O=s.useState(!1),Z=(0,r.Z)(O,2),k=Z[0],C=Z[1];return s.createElement("div",{className:"w-full flex flex-col"},s.createElement("div",{className:"flex flex-col px-7 p-3 border-b  space-y-6 items-start w-35rem"},s.createElement(p.Z,{width:"w-full",required:!0,type:"email",margin:"",placeholder:v.manage_points.add_new_customer.email.placeholder,label:v.manage_points.add_new_customer.email.name,value:_.user_email,onChange:function(e){g(x(x({},_),{},{user_email:e.target.value}))},error:S.includes("user_email")||""===_.user_email&&k,error_message:S.includes("user_email")||""===_.user_email&&k&&(0,d.e$)(w,"user_email")}),s.createElement(p.Z,{width:"w-full",type:"number",margin:"",label:v.manage_points.add_new_customer.points,value:_.points,onChange:function(e){g(x(x({},_),{},{points:(0,d.mE)(e.target.value)}))},error:S.includes("points"),error_message:S.includes("points")&&(0,d.e$)(w,"points")}),s.createElement(p.Z,{width:"w-full",type:"area",margin:"",label:v.manage_points.add_new_customer.comments,value:_.comments,onChange:function(e){g(x(x({},_),{},{comments:e.target.value}))},error:S.includes("comments"),error_message:S.includes("comments")&&(0,d.e$)(w,"comments")})),s.createElement("div",{className:"w-full flex items-center py-3 px-7   justify-end space-x-4"},s.createElement(i.Z,{padding:"px-6 py-2.5",textStyle:"text-light font-medium text-sm_14_l_20",bgColor:"bg-white",outline:!0,outlineStyle:"border-light ",click:function(e){e.preventDefault(),o(!n)}},v.common.cancel),s.createElement(i.Z,{padding:"px-6 py-3",textStyle:"text-sm_14_l_20 font-medium text-white ",click:function(e){var n;e.preventDefault(),n={wlr_nonce:t.local.point_users.wlr_user_nonce,action:"wlr_add_new_customer"},n=Object.assign({},n,_),(0,c.j0)(n).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?(alertify.success(t.data.message),a(),g({user_email:"",points:0,comments:""}),E({}),j([]),l()):!1===t.success&&null!==t.data&&(E(t.data),void 0===t.data.field_error&&j([]),C(!0),(0,d.il)(t.data,{setErrorList:j}))}))}},v.common.save)))};var g=a(3399),v=a(7338),b=a(6048),y=a(1401),w=a(1731);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const N=function(e){var t=e.close,a=e.State,l=e.setState,n=e.nonce,o=s.useState(!0),m=(0,r.Z)(o,2),p=m[0],f=m[1],x=s.useState(null),_=(0,r.Z)(x,2),E=_[0],N=_[1],S=s.useState("equal"),j=(0,r.Z)(S,2),O=j[0],Z=j[1],k=s.useContext(u.Gr),C=function(e,t){var a=s.useState(e),l=(0,r.Z)(a,2),n=l[0],c=l[1];return s.useEffect((function(){var e;(e=n)&&"incomplete"===e.response_status&&L()}),[n]),[n,c]}({file:{},header:{},need_update:"no",process_count:0,total_count:0,limit_start:y.Uk}),D=(0,r.Z)(C,2),P=D[0],A=D[1],L=function(){var e=Object.assign({},{wlr_nonce:n,action:"wlr_handle_import",need_update:P.need_update,handle_count:P.process_count,total_count:P.total_count,limit_start:P.limit_start,update_type:O,limit:a.csv_limit},P.file);(0,c.j0)(e).then((function(e){var a=(0,d.R3)(e.data);if(!0===a.success&&null!==a.data&&a.data!=={}){f(!1);var l=a.data.success;"incomplete"===l?a.data.total_count<a.data.limit_start?A(h(h({},P),{},{process_count:a.data.total_count,limit_start:a.data.limit_start,response_status:l})):A(h(h({},P),{},{process_count:P.limit_start,limit_start:a.data.limit_start,response_status:l})):"completed"===a.data.success&&(A(h(h({},P),{},{process_count:P.limit_start-1,limit_start:a.data.limit_start,response_status:l})),f(!1),alertify.success(a.data.message),setTimeout((function(){z(1),V(0),t(),location.reload()}),1500),f(!1))}else!1===a.success&&null!==a.data&&(alertify.error(a.data.message),f(!1))}))},F=s.useRef(null),R=s.useState(1),G=(0,r.Z)(R,2),U=G[0],z=G[1],I=s.useState(0),q=(0,r.Z)(I,2),T=q[0],V=q[1],$=[{label:k.common.select.yes,value:"yes"},{label:k.common.select.no,value:"no"}],H=[{label:"10",value:"10"},{label:"20",value:"20"},{label:"40",value:"40"},{label:"50",value:"50"}],K=[{label:k.common.select.add,value:"add"},{label:k.common.select.sub,value:"sub"},{label:k.common.select.equal,value:"equal"}],M=[{id:1,name:k.manage_points.progress.upload},{id:2,name:k.manage_points.progress.preview},{id:3,name:k.manage_points.progress.completed}],Y=function(e){var t=e.item;return s.createElement("div",{className:"flex items-center space-x-2 ".concat(t.id!=M.length?"w-4/12":"w-3/12")},s.createElement("div",{className:"flex items-center justify-center"},s.createElement("div",{className:" p-4 rounded-full border-gray-300 border border-opacity-50  \n          ".concat(U==t.id&&"bg-primary border-0 "," ").concat(T>=t.id&&"bg-green-500 border-0 ")}),s.createElement("p",{className:"absolute text-15px antialiased mt-2px ".concat((U==t.id||T>=t.id)&&"text-white")},t.id)),s.createElement("p",{className:"antialiased text-15px "},t.name),t.id!=M.length&&s.createElement("div",{className:"w-full border  border-gray-300 border-opacity-50"}))},B=function(e){var t=e.bg,a=void 0===t?"bg-primary":t,l=e.count,n=void 0===l?0:l,r=e.text,c=void 0===r?k.manage_points.progress.total:r,i=e.textStyle,o=void 0===i?"text-primary":i;return s.createElement("div",{className:"flex items-center space-x-3 ".concat(a," bg-opacity-5 py-2 px-5 ")},s.createElement("p",{className:"text-textColor text-15px antialiased"},c),s.createElement("p",{className:"text-15px ".concat(o," font-medium")},n))};s.useEffect((function(){l(h(h({},a),{},{selectedFile:E})),f(!1)}),[E]);var W=function(){var e={};e.importfile=a.selectedFile,e.wlr_nonce=n,e.need_update=a.need_update,e.limit=a.csv_limit,e.action="wlr_import_preview",e.update_type=O;var t=function(e){return["email","points","referral_code","comment"].includes(e)};(0,c.j0)(e).then((function(e){var a=(0,d.R3)(e.data);"completed"===a.success&&null!==a.data&&a.data!=={}?(Object.keys(a.data.header).every(t)?A(h(h({},a.data),{},{limit_start:y.Uk})):(alertify.error(k.common.format),N(null),(0,d.Yd)("csvFileImport"),z(1),V(0)),f(!1)):(alertify.error(a.message),f(!1))}))},J=function(e){var t=e.active,a=e.completed,l=e.disable,n=void 0!==l&&l,r=e.operation,c=void 0===r?null:r;return s.createElement(i.Z,{padding:"px-5 py-2.5",bgColor:"bg-primary",textStyle:"text-sm text-white",click:function(e){e.preventDefault(),z(t),V(a),null!==c&&c(),f(!0)},disabled:n},k.manage_points.progress.next)},Q=function(e){var t=e.active,a=e.completed;return s.createElement(i.Z,{padding:"px-5 py-2.5",bgColor:"bg-base-btn_bg",disabled:"string"==typeof P.response_status,textStyle:"text-sm text-textColor-light",click:function(e){e.preventDefault(),z(t),V(a)}},k.common.back)},X=function(){return s.createElement("div",{className:"grid grid-cols-2 gap-3 w-full min-w-full bg-primary_extra_light py-2 px-5 rounded"},s.createElement("p",{className:"text-textColor-light antialiased text-15px"},k.manage_points.progress.field_name),s.createElement("p",{className:"text-textColor-light antialiased text-15px"},k.manage_points.progress.field_value))},ee=function(e){var t=e.fieldName,a=e.fieldValue;return s.createElement("div",{className:"grid grid-cols-2 gap-3 w-full min-w-full pb-2 px-5 rounded border-b border-gray-300",key:t},s.createElement("p",{className:"text-textColor antialiased text-15px"},t),s.createElement("p",{className:"text-textColor antialiased text-15px"},a||"-"))},te=function(){return s.useEffect((function(){var e,t;!p&&(t=function(e){e.preventDefault(),N(e.dataTransfer.files[0])},(e=document.getElementById("drop-file-ref")).addEventListener("drop",t),e.addEventListener("dragover",t))}),[]),s.createElement("div",{className:"w-full flex flex-col items-start justify-start"},s.createElement("div",{className:"w-full flex flex-col items-start justify-start px-7"},s.createElement("p",{className:"leading-5 text-xs mt-3 tracking-wide py-2.5 px-3 font-normal rounded-md",style:{backgroundColor:"rgb(255,213,87)",color:"black"}},s.createElement("span",{className:"font-medium"},s.createElement("i",{className:"wlr wlrf-warning"})," ",k.manage_points.important_label)," ",k.manage_points.import_notice),s.createElement("div",{className:"w-full space-y-3"},s.createElement("input",{accept:"text/csv, .csv",id:"csvFileImport",type:"file",onChange:function(e){(0,d.KH)(e.target.files,["csv"],"csvFileImport")&&N(e.target.files[0])},ref:F,className:"hidden"}),s.createElement("div",{className:"flex flex-col items-center justify-center space-y-4 w-full py-10 border-2 border-dashed border-gray-300 rounded cursor-pointer",onClick:function(){return F.current.click()},id:"drop-file-ref"},E?s.createElement("i",{className:"wlr wlrf-file_check text-4xl text-primary"}):s.createElement("i",{className:"wlr wlrf-file_upload text-4xl text-textColor-light"}),E?s.createElement("p",{className:"text-15px text-textColor-light"},"".concat(k.manage_points.import.added," ").concat(E.name," "),s.createElement("span",{className:"text-primary "},k.manage_points.import.choose_another_file)," ".concat(k.manage_points.import.replace)):s.createElement("p",{className:"text-15px text-textColor-light"},"".concat(k.manage_points.import.drag_drop," "),s.createElement("span",{className:"text-primary "},k.manage_points.import.choose_file)," ".concat(k.manage_points.import.upload_data))))),s.createElement("div",{className:"flex items-end  w-full space-x-4 px-7 py-4 space-y-4 border-b border-light_border"},s.createElement(g.Z,{width:"w-1/3"},s.createElement(v.Z,{fontSize:"text-sm",others:" font-medium text-textColor"},k.manage_points.import.update_points),s.createElement(b.Z,{options:$,value:a.need_update,onChange:function(e){l(h(h({},a),{},{need_update:e.value}))}})),s.createElement(g.Z,{width:"w-1/3"},s.createElement(v.Z,{fontSize:"text-sm",others:" font-medium text-textColor"},k.manage_points.import.records_per_batch),s.createElement(b.Z,{options:H,value:a.csv_limit,onChange:function(e){l(h(h({},a),{},{csv_limit:e.value}))}})),s.createElement(g.Z,{width:"w-1/3"},s.createElement(v.Z,{fontSize:"text-sm",others:" font-medium text-textColor"},k.manage_points.import.points_update_type),s.createElement(b.Z,{options:K,value:O,onChange:function(e){Z(e.value)}}))),s.createElement("div",{className:"flex w-full items-center justify-end px-7  py-3"},s.createElement(J,{active:2,completed:1,disable:!E,operation:W,removeSelectedFileId:"csvFileImport"})))},ae=function(){return s.createElement("div",{className:"flex flex-col w-full"},s.createElement("div",{className:"w-full flex-col items-center justify-start px-7 pb-3  border-b border-light_border space-y-4"},s.createElement(B,{count:P.total_count}),s.createElement(X,null),Object.keys(P.header).map((function(e,t){return s.createElement(ee,{key:t,fieldName:e,fieldValue:P.header[e]})}))),s.createElement("div",{className:"flex items-center space-x-3  py-3 px-7 justify-end"},s.createElement(Q,{active:1,completed:0}),s.createElement(J,{active:3,completed:2,operation:L})))},le=function(){return s.createElement("div",{className:"flex flex-col w-full"},s.createElement("div",{className:"w-full flex-col items-start justify-start border-b border-light_border pb-3 px-7 space-y-4"},s.createElement(B,{bg:"bg-green-500",textStyle:"text-green-500",text:k.manage_points.progress.processed,count:P.process_count}),s.createElement(X,null),Object.keys(P.header).map((function(e){return s.createElement(ee,{fieldName:e,fieldValue:P.header[e]})}))))};return s.createElement("div",{className:"w-35rem mt-3 xl:mt-4 2xl:mt-5 flex flex-col items-start justify-start space-y-5"},s.createElement((function(){return s.createElement("div",{className:"w-full flex items-center px-24 space-x-2 justify-center"},M.map((function(e){return s.createElement(Y,{item:e,key:e.id})})))}),null),p?s.createElement(w.Z,{height:"h-[250px]"}):s.createElement("div",{className:"flex flex-col w-full space-y-3"},function(){switch(U){case 1:default:return s.createElement(te,null);case 2:return s.createElement(ae,null);case 3:return s.createElement(le,null)}}()))};function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const O=function(e){var t,a,l,n,o,m=e.close,p=e.State,f=(e.setState,e.nonce),x=s.useContext(u.Gr),_=s.useState(!0),g=(0,r.Z)(_,2),v=g[0],b=g[1],E=(t={limit:y.pY,limit_start:0,process_count:0,total_count:0,base_url:"",action:"wlr_handle_export"},a=s.useState(t),l=(0,r.Z)(a,2),n=l[0],o=l[1],s.useEffect((function(){var e;(e=n)&&"incomplete"===e.response_status&&R()}),[n]),[n,o]),h=(0,r.Z)(E,2),N=h[0],S=h[1],O=s.useState(1),Z=(0,r.Z)(O,2),k=Z[0],C=Z[1],D=s.useState(0),P=(0,r.Z)(D,2),A=P[0],L=P[1],F=[{id:1,name:x.manage_points.progress.preview},{id:2,name:x.manage_points.progress.completed}];s.useEffect((function(){var e;e={wlr_nonce:f,action:"wlr_export_preview"},(0,c.j0)(e).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?(S(t.data),b(!1)):!1===t.success&&null!==t.data&&alertify.error(t.data.message)}))}),[p.users]);var R=function(){var e={wlr_nonce:f,action:"wlr_handle_export",process_count:N.process_count,total_count:N.total_count,limit_start:N.limit_start,limit:N.limit};(0,c.j0)(e).then((function(e){var t=(0,d.R3)(e.data);if(!0===t.success&&null!==t.data){var a=t.data.success;"incomplete"===a?t.data.total_count<=t.data.limit_start?S(j(j({},N),{},{process_count:t.data.total_count,limit_start:t.data.limit_start,response_status:a})):S(j(j({},N),{},{process_count:t.data.limit_start,limit_start:t.data.limit_start,response_status:a})):"completed"===a&&(b(!1),alertify.success(t.data.message),setTimeout((function(){C(1),L(0),m(),location.reload()}),500)),b(!1)}else!1===t.success&&null!==t.data&&(alertify.error(t.data.message),b(!1))}))},G=function(e){var t=e.item;return s.createElement("div",{className:"flex items-center space-x-2 ".concat(t.id!=F.length?"w-4/12":"w-3/12")},s.createElement("div",{className:"flex items-center justify-center"},s.createElement("div",{className:" p-4 rounded-full border-gray-300 border border-opacity-50  \n          ".concat(k==t.id&&"bg-primary border-0 "," ").concat(A>=t.id&&"bg-green-500 border-0 ")}),s.createElement("p",{className:"absolute text-15px antialiased mt-2px ".concat((k==t.id||A>=t.id)&&"text-white")},t.id)),s.createElement("p",{className:"antialiased text-15px "},t.name),t.id!=F.length&&s.createElement("div",{className:"w-full border  border-gray-300 border-opacity-50"}))},U=function(e){var t=e.bg,a=void 0===t?"bg-primary":t,l=e.count,n=void 0===l?0:l,r=e.text,c=void 0===r?x.manage_points.progress.total:r,i=e.textStyle,o=void 0===i?"text-primary":i;return s.createElement("div",{className:"flex items-center justify-between ".concat(a," bg-opacity-5 py-2 px-5 rounded")},s.createElement("p",{className:"text-textColor text-15px antialiased"},c),s.createElement("p",{className:"text-15px ".concat(o," font-medium")},n))},z=function(e){var t=e.active,a=e.completed,l=e.disable,n=void 0!==l&&l;return s.createElement(i.Z,{padding:"px-5 py-2.5",bgColor:"bg-primary",textStyle:"text-sm text-white",click:function(e){e.preventDefault(),C(t),L(a),b(!0),R()},disabled:n},x.manage_points.progress.next)},I=function(){return s.createElement("div",{className:"flex flex-col w-full"},s.createElement("div",{className:"w-full flex-col items-start px-7 pb-3 border-b border-light_border justify-start space-y-4"},s.createElement(U,{count:N.total_count})),s.createElement("div",{className:"flex items-center space-x-2 px-7 py-3  justify-end"},s.createElement(z,{active:2,completed:1})))},q=function(){return s.createElement("div",{className:"w-full flex flex-col"},s.createElement("div",{className:"w-full flex-col items-start justify-start px-7 pb-3 border-b border-light_border space-y-4"},s.createElement(U,{count:N.total_count}),s.createElement(U,{bg:"bg-green-500",textStyle:"text-green-500",text:x.manage_points.progress.processed,count:N.process_count})))};return s.createElement("div",{className:"w-35rem mt-3 xl:mt-4 2xl:mt-5 flex flex-col items-start justify-start space-y-5"},v?s.createElement(w.Z,{height:"h-[150px]"}):s.createElement("div",{className:"flex flex-col w-full space-y-3"},s.createElement((function(){return s.createElement("div",{className:"w-full flex items-center space-x-2 justify-center"},F.map((function(e){return s.createElement(G,{item:e,key:e.id})})))}),null),function(){switch(k){case 1:default:return s.createElement(I,null);case 2:return s.createElement(q,null)}}()))},Z=function(e){e.close;var t=e.localState,a=s.useContext(u.Gr),l=function(e){var t=e.fileName,l=e.download;return s.createElement("div",{className:"flex items-center px-5 py-3 justify-between gap-3 w-full min-w-full border border-light_border  bg-primary_extra_light rounded ",key:t},s.createElement("div",{className:"flex justify-start gap-x-2"},s.createElement("div",null,s.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-file color-important "})),s.createElement("p",{className:"text-textColor antialiased text-15px"},t)),s.createElement("a",{download:t,href:l,className:"text-sm text-primary hover:text-green-500 border-none shadow-none"},a.manage_points.progress.download))};return s.createElement("div",{className:"w-35rem flex flex-col justify-start items-start p-5 h-125 2xl:h-150 space-y-2 overflow-y-auto"},t.local.point_users.export_csv_file_list.map((function(e,t){return s.createElement(l,{fileName:e.file_name,download:e.file_url,key:t})})))};var k=a(3007),C=a(4753),D=a(1489);const P=function(e){var t=e.icon,a=e.title,l=e.description,n=e.import_customer,r=e.add_new,c=e.importAction,o=e.addNewCustomerAction,m=(0,s.useContext)(u.jZ);return s.createElement("div",{className:"w-full  h-120 flex flex-col justify-center items-center gap-y-2 2xl:gap-y-4 bg-white"},s.createElement("div",null,t),s.createElement("h2",{className:"text-sm 2xl:text-xl text-dark font-bold"},a),s.createElement("p",{className:"text-light text-base font-normal  text-center tracking-wide max-w-xl leading-7.5"},l),m&&s.createElement("div",{className:"flex items-center justify-center gap-2 2xl:gap-3"},s.createElement(i.Z,{padding:"px-3 2xl:px-5 py-2 2xl:py-3",bgColor:"bg-white",outline:!0,textStyle:"text-primary font-medium text-xs 2xl:text-sm_14_l_20",outlineStyle:"border-primary_border",others:"hover:shadow-none",click:c},n),s.createElement(i.Z,{padding:"px-3 2xl:px-5 py-2 2xl:py-3",bgColor:"bg-primary",outline:!1,textStyle:"text-white font-medium text-xs 2xl:text-sm_14_l_20",others:"hover:shadow-none",click:o},r)))};var A=a(1554),L=a(2304),F=a(1257);const R=function(e){var t=e.AllCheck,a=e.AllCheckList,l=e.setAllCheck,n=e.State,r=e.active,c=e.setActive,i=e.activeState,o=e.setActiveState,m=e.CommonState,p=(0,s.useContext)(u.Gr),f=s.useContext(u.jZ),x=function(e){var t=e.children,a=e.span,l=e.subtitle;return s.createElement("div",{className:"grid ".concat(a,"  absoulute  text-light text-10px 2xl:text-12px font-semibold uppercase leading-4 self-center")},t," ",s.createElement("span",{className:"text-extra_light font-normal text-10px "},l))};return s.createElement("div",{className:"grid grid-cols-12 items-center 2xl:gap-3 w-full min-w-full  py-4",style:{minWidth:"1024px"}},s.createElement(F.Z,{checked:t&&a.length===n.users.length,click:function(){return l(!t)}}),s.createElement((function(e){var t=e.children,a=e.span;return e.subtitle,s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a)},s.createElement("div",{onClick:function(){(0,d.c3)(r,c,p.common.email_descending,p.common.email_ascending,"email_desc","email_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 cursor-pointer"},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),s.createElement("span",{className:"text-light flex items-center"},["email_asc","email_desc"].includes(i.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("email_asc"===i.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-3"},p.manage_points.customers),s.createElement((function(e){var t=e.children,a=e.span;return s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a," ")},s.createElement("div",{onClick:function(){(0,d.c3)(r,c,p.common.point_descending,p.common.point_ascending,"point_desc","point_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 cursor-pointer"},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),s.createElement("span",{className:"text-light flex items-center"},["point_asc","point_desc"].includes(i.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("point_asc"===i.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-3"},p.manage_points.available_points),s.createElement((function(e){var t=e.children,a=e.span;return s.createElement("div",{className:"grid ".concat(a,"  absoulute")},s.createElement("div",{className:"text-light text-10px 2xl:text-12px font-semibold uppercase leading-4"},t))}),{span:"col-span-2"},p.rewards.name),s.createElement((function(e){var t=e.children,a=e.span;return e.subtitle,s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a)},s.createElement("div",{onClick:function(){f&&(0,d.c3)(r,c,p.common.level_descending,p.common.level_ascending,"level_desc","level_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 ".concat(f&&"cursor-pointer"," ")},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),f&&s.createElement("span",{className:"text-light flex items-center"},["level_asc","level_desc"].includes(i.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("level_asc"===i.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-1"},p.manage_points.levels_image),s.createElement(x,{span:"col-span-1"},p.levels.created_on_label),s.createElement(x,{span:"col-span-1 md:justify-center"},p.common.actions))};var G=a(9902),U=a(2382),z=a(6);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=s.lazy((function(){return a.e(95).then(a.bind(a,7154))}));const V=function(){var e=s.useContext(u.Gr),t=s.useContext(u.jZ),a=s.useContext(u.ko),l=a.CommonState,p=a.setCommonState,f=a.appState,x=l.customers,g=x.sort,v=x.limit,b=x.search,w=s.useState(null),E=(0,r.Z)(w,2),h=E[0],S=E[1],j=s.useState({loading:!0,users:[],pageCount:1,offset:0,selectedFile:null,need_update:"no",csv_limit:y.Zu,export_popup:!1,export_limit:y.l0,export_process_item:0,export_total_count:0,export_none:""}),F=(0,r.Z)(j,2),I=F[0],V=F[1],$=!1,H=s.useState(!1),K=(0,r.Z)(H,2),M=K[0],Y=K[1],B=s.useState(!1),W=(0,r.Z)(B,2),J=W[0],Q=W[1],X=s.useState(!1),ee=(0,r.Z)(X,2),te=ee[0],ae=ee[1],le=s.useState(!1),ne=(0,r.Z)(le,2),re=ne[0],se=ne[1],ce=s.useState(!1),ie=(0,r.Z)(ce,2),oe=ie[0],me=ie[1],ue=s.useState(!1),de=(0,r.Z)(ue,2),pe=de[0],fe=de[1],xe=s.useState(""),_e=(0,r.Z)(xe,2),ge=_e[0],ve=_e[1],be=s.useState([]),ye=(0,r.Z)(be,2),we=ye[0],Ee=ye[1],he=s.useState(!1),Ne=(0,r.Z)(he,2),Se=Ne[0],je=Ne[1],Oe=s.useState(!1),Ze=(0,r.Z)(Oe,2),ke=Ze[0],Ce=Ze[1],De=s.useState(!1),Pe=(0,r.Z)(De,2),Ae=Pe[0],Le=Pe[1],Fe=s.useState(""),Re=(0,r.Z)(Fe,2),Ge=Re[0],Ue=Re[1],ze=[{value:"all",label:e.common.active_all},{value:"id_asc",label:e.common.id_asc},{value:"id_desc",label:e.common.id_desc},{value:"email_asc",label:e.common.email_ascending},{value:"email_desc",label:e.common.email_descending},{value:"level_asc",label:e.common.level_ascending},{value:"level_desc",label:e.common.level_descending},{value:"point_asc",label:e.common.point_ascending},{value:"point_desc",label:e.common.point_descending}],Ie=function(e){var t=(0,n.Z)(we);t.includes(e)?(t.splice(t.indexOf(e),1),Ee(t)):Ee([].concat((0,n.Z)(t),[e]))},qe=function(e){var t={wlr_nonce:f.local.point_users.wlr_user_nonce,action:"wlr_get_customer_list",limit:v.value,offset:void 0!==(null==e?void 0:e.offset)?e.offset:x.offset,sorting_field:g.value,search:(null==e?void 0:e.search)||b};V(q(q({},I),{},{loading:!0})),(0,c.j0)(t).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?V((function(e){return q(q({},e),{},{users:t.data.item,pageCount:Math.ceil(t.data.total_count/t.data.limit),loading:!1})})):!1===t.success&&null!==t.data&&(alertify.error(t.data.message),ve(b),V(q(q({},I),{},{loading:!1})))}))},Te=function(e){var t={wlr_nonce:f.local.common.wlr_common_user_nonce,action:"wlr_update_customer_birth_date",id:e.id,birth_date:e.birthday_date};V(q(q({},I),{},{loading:!0})),(0,c.j0)(t).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?(V(q(q({},I),{},{loading:!1})),alertify.success(t.data.message)):!1===t.success&&null!==t.data&&(V(q(q({},I),{},{loading:!1})),alertify.error(t.data.message)),qe()}))};s.useEffect((function(){$=!0,qe()}),[f]),s.useEffect((function(){if(!$){var e=q({},l);e.customers.offset=0,p(e),qe()}}),[g,v]);var Ve=function(){var e=q({},l);e.customers.offset=0,p(e),ve(b),qe({search:b,offset:0})};s.useLayoutEffect((function(){var e=[];pe?(I.users.map((function(t){return e.push(t.id)})),Ee(e)):Ee([])}),[pe]),s.useEffect((function(){0!==I.users.length&&I.users.length===we.length&&fe(!0)}),[we]);var $e,He,Ke=function(e,t){var a=(0,n.Z)(I.users);a.map((function(a){t.id===a.id&&(a.birthday_date=e)})),V(q(q({},I),{},{users:a}))},Me=function(){var e={action:"wlr_bulk_delete_users",user_list:we,wlr_nonce:f.local.point_users.wlr_user_nonce};(0,c.j0)(e).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&t.data!=={}?(alertify.success(t.data.message),Ee([]),fe(!1)):alertify.error(t.data.message),qe()}))},Ye=function(e){var t={action:"wlr_delete_customer",id:e,wlr_nonce:f.local.point_users.wlr_user_nonce};(0,c.j0)(t).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&t.data!=={}?(alertify.success(t.data.message),Ee([]),fe(!1)):alertify.error(t.data.message),qe()}))};return s.createElement("div",{className:"bg-white w-full rounded-b-xl h-full flex flex-col items-start py-5 px-8 space-y-4 "},s.createElement("div",{className:"flex items-center justify-between w-full gap-x-1.5"},s.createElement(C.Z,{title:e.manage_points.name,videoLink:e.common.all_video_links.point_users}),s.createElement("div",{className:"flex items-center gap-x-1.5 2xl:gap-x-2 "},we.length>0?s.createElement(i.Z,{icon:s.createElement("i",{className:"text-md leading-0 antialiased wlr wlrf-delete text-redd color-important "}),bgColor:"bg-white",textStyle:"text-redd font-medium text-sm_14_l_20",padding:"px-5 py-3",outline:!0,outlineStyle:"border-redd",click:function(t){t.preventDefault(),(0,D.G)(Me,e.manage_points.delete_multi_alert_message,e.manage_points.delete_ok,e.manage_points.delete_cancel,e.manage_points.delete_customer)}},e.common.delete):s.createElement("div",{className:"flex items-center gap-x-1.5 2xl:gap-x-2"},s.createElement(k.Z,{id:"search_customers",search_icon_id:"search_customer_icon",placeHolder:e.manage_points.search_customer,value:b,onChange:function(e){var t=q({},l);t.customers.search=e.target.value,p(t)},onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),Ve())},click:function(e){e.preventDefault(),je(!1),Ce(!1),Ve()},onfocus:function(e){je(!1),Ce(!1)},others:"w-32.5 xl:w-37.5 2xl:w-45"}),s.createElement(A.Z,{title:e.common.sort_by,active:Se,setActive:je,activeState:g,setActiveState:function(e){var t=q({},l);t.customers.sort={value:e.value,label:e.label},p(t)},activeLabels:t?ze:($e=ze,He=[],(0,n.Z)($e).map((function(e){["level_asc","level_desc"].includes(e.value)||He.push(e)})),He),width:"w-44",icon:s.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-filter color-important  "}),closeOtherDropDown:function(){Ce(!1)}}),s.createElement(i.Z,{id:"import_customers",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-import color-important"}),bgColor:"bg-white",textStyle:"text-primary font-medium text-xs  2xl:text-sm_14_l_20",h:!0,padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,outlineStyle:"border-primary",click:function(e){e.preventDefault(),t&&(Q(!0),je(!1),Ce(!1))},is_pro:t},e.manage_points.import_txt),s.createElement(i.Z,{id:"export_customers",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-export color-important "}),bgColor:"bg-white",textStyle:"text-primary font-medium text-xs  2xl:text-sm_14_l_20",padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,outlineStyle:"border-primary",click:function(e){t&&(e.preventDefault(),ae(!0),je(!1),Ce(!1))},is_pro:t},e.manage_points.export_txt),f.local.point_users.show_export_file_download>0&&t&&s.createElement(i.Z,{padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-document-download color-important "}),bgColor:"bg-white",textStyle:"text-xs  2xl:text-sm_14_l_20 text-primary ",minwidth:"180px",click:function(e){e.preventDefault(),t&&(me(!0),je(!1),Ce(!1))},is_pro:t},e.manage_points.exported_txt),s.createElement(i.Z,{id:"add_new_customer",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-customer color-important "}),bgColor:"bg-primary",textStyle:"text-white font-medium text-xs  2xl:text-sm_14_l_20",padding:"xl:px-3 2xl:px-5 px-2.5 py-3",outline:!0,outlineStyle:"border-primary_light",click:function(e){e.preventDefault(),t&&(Y(!0),je(!1),Ce(!1))},is_pro:t},e.manage_points.add_new_customer_txt)))),s.createElement("div",{className:"flex flex-col items-start w-full ",onClick:function(){je(!1)}},s.createElement(R,{AllCheck:pe,AllCheckList:we,setAllCheck:fe,State:I,active:Ae,setActive:Le,activeState:g,setActiveState:p,CommonState:l}),I.loading?s.createElement(U.Z,{listData:v.value,height:"h-158"}):I.users.length>0?s.createElement("div",{className:"relative flex flex-col space-y-2 items-start w-full min-h-158",onClick:function(){Ce(!1)}},I.users.map((function(e){return s.createElement(s.Suspense,{key:e.id,fallback:s.createElement(G.Z,{height:"h-30"})},s.createElement(T,{key:e.id,user:e,State:I,setState:V,localState:f,AllCheckList:we,AddCheck:Ie,updateAction:Te,deleteUser:Ye,save:Ke,copied:{value:Ge,set:Ue},ShowPoints:{value:re,set:se},id:{value:h,set:S}}))}))):s.createElement(P,{icon:s.createElement("i",{className:"text-6xl 2xl:text-8xl text-primary  wlr wlrf-customer-empty color-important "}),title:""===ge?e.manage_points.empty.name:e.manage_points.no_customers,description:""===ge?e.manage_points.empty.description:e.manage_points.no_customers_description,import_customer:e.manage_points.import_customers,add_new:e.manage_points.add_new_customer_txt,importAction:function(e){e.preventDefault(),Q(!0)},addNewCustomerAction:function(e){e.preventDefault(),Y(!0)}}),s.createElement("div",{className:"flex items-center justify-end  w-full py-3"},I.users.length>0&&s.createElement(L.Z,{editLimit:ke,setEditLimit:Ce,limitFilter:v,setLimitFilter:function(e){var t=q({},l);t.customers.limit={value:e.value},p(t)},closeOtherDropDown:function(){je(!1)}}),I.pageCount>1&&s.createElement(o.Z,{handlePageClick:function(e){var t=e.selected,a=Math.ceil(t*v.value),n=q({},l);n.customers.offset=a,p(n),qe()},pageCount:I.pageCount,limit:!0,forcePage:x.offset/x.limit.value,loading:I.loading}))),M&&s.createElement(m.Z,{title:e.manage_points.add_new_customer_txt,open:M,setOpen:Y},s.createElement(_,{open:M,setOpen:Y,localState:f,loadUserLists:qe,close:function(){return Y(!1)}})),J&&s.createElement(m.Z,{title:e.manage_points.import_customers,open:J,setOpen:Q},s.createElement(N,{close:function(){return Q(!1)},State:I,setState:V,nonce:f.local.point_users.wlr_user_nonce})),te&&s.createElement(m.Z,{title:e.manage_points.export_customers,open:te,setOpen:ae},s.createElement(O,{close:function(){return ae(!1)},State:I,setState:V,nonce:f.local.point_users.wlr_user_nonce})),me&&s.createElement(m.Z,{title:e.manage_points.download_exports,open:oe,setOpen:me},s.createElement(Z,{close:function(){return oe(!1)},localState:f})),re&&s.createElement(m.Z,{title:e.manage_points.update_points,open:re,setOpen:se},s.createElement(z.Z,{id:h,handlePointUpdate:d.UC,reload:qe,nonce:f.local.common.wlr_common_user_nonce,setShowPoints:se})))}}}]);